<%- include('../partials/header') %>
<div class="col"><%- include('../partials/message') %></div>

<!-- Adding Bootstrap JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js.bootstrap.bundle.min.js"></script>

<main>
  <link href="/resources/css/stylesheet.css" rel="stylesheet" type="text/css">
    <div class="container">
      <!-- THE REST OF YOUR HTML CODE GOES HERE -->
      <h1 id="budget-title">Yearly Budget</h1>
      <%- include ('../partials/budgetNav') %>
    
      <!--Function for Pie Chart -->
  <script>
  window.onload = function() {
    console.log("in function for onload year");

    fetch(`/getChartDataYear`)
      .then(response => response.json())
      .then(dataPoints => {

      if (dataPoints.length > 0) {
      var chart = new CanvasJS.Chart("chartContainer", {
      backgroundColor: "#D2D2D2",
      animationEnabled: true,
      title:{
        fontFamily: "Tahoma",
        fontStyle: "bold",
        fontColor: "#616161",
        text: "Summary of Year",
        horizontalAlign: "left"
      },
      data: [{
        type: "doughnut",
        startAngle: 60,
        //innerRadius: 60,
        indexLabelFontSize: 17,
        indexLabel: "{label} - #percent%",
        toolTipContent: "<b>{label}:</b> {y} (#percent%)",
        dataPoints: dataPoints
      }],
    });
    chart.render();
  }
  
    })
    .catch(error => {
        console.error('Error fetching data for chart:', error);
        // Handle the error if needed
      });
    }
    </script>
    <div id="chartContainer" style="height: 500px; width: 100%;"></div>
    <script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
  </main>

<%- include('../partials/footer') %>
